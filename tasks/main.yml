---
# tasks file for ansible-docker-keycloak


- name: Install Dependencies
  import_tasks: "{{ role_path }}/tasks/install_dependencies.yml"
  become: yes

- name: Setup Cert Bot
  import_tasks: "{{ role_path }}/tasks/setup_lets_encrypt.yml"
  become: yes

- name: Setup Nginx
  import_tasks: "{{ role_path }}/tasks/setup_nginx.yml"
  become: yes

- name: Setup Docker
  import_tasks: "{{ role_path }}/tasks/setup_keycloak_docker.yml"
  become: yes

- name: Ensure Keycloak Stopped
  service:
    name: "{{ item }}"
    state: stopped
  when: "{{ keycloak_systemd_services_list }}"

- name: Ensure Keycloak Started
  service:
    name: "{{ item }}"
    state: started
  when: "{{ keycloak_systemd_services_list }}"